// AUTO-GENERATED by protoc-gen-webviewrpc
import { {{range .AllMessages}}{{.}},{{end}} } from "./{{.ProtoBaseName}}.pb.js";
// ↑ 실제 JS 메시지 생성 로직( --js_out )으로 만들어진 모듈을 import 한다 가정

export class {{.ServiceName}}Client {
  constructor(rpcClient) {
    this.rpcClient = rpcClient;
  }

  {{range .Methods}}
  async {{.MethodName}}(request) {
    // request -> protobuf encode -> base64 -> send
    const reqBytes = {{.InputType}}.encode(request).finish();
    const respBytes = await this.rpcClient.callMethod(
      "{{$.ServiceName}}.{{.MethodName}}",
      reqBytes
    );
    return {{.OutputType}}.decode(respBytes);
  }
  {{end}}
}